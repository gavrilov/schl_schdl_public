{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}Info{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
          integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
{% endblock %}


{% block page_content %}
    {{ super() }}
    <h1>{{ user.first_name }} {{ user.last_name }} </h1><h3 style="color: lightgrey">{{ user.email }}</h3>
    <!--Students table-->
    <div class="row">
        <div class="col text-left">
            <h3>Students</h3>
        </div>
        <div class="col text-right">
            <a class="btn btn-outline-primary" href="{{ url_for('student.add_student') }}" role="button">Add Student</a>
        </div>
    </div>
    <table class="table table-striped table-hover">
        <tbody>
        {% for student in students %}
            <tr>
                <td>{{ student.first_name }} {{ student.last_name }}</td>
                {# Show buttons for all enrolled classes #}
                <td> {% if student.classes.count() > 0 %}
                    Enrolled in
                    {% for current_class in student.classes %}
                        <a class="btn btn-outline-primary"
                           href="{{ url_for('schdl_class.enroll_class', student_id=student.id, class_id=current_class.id) }}"
                           role="button">{{ current_class.subject.name }}</a>
                    {% endfor %}
                {% endif %}
                </td>
                {# Show button to Register for new classes #}
                <td class="text-right">
                    <a class="btn btn-success" href="{{ url_for('student.enroll_student', student_id=student.id) }}"
                       role="button">Register for Classes</a>
                </td>
                {# Edit Student Button  #}
                <td class="text-right">
                    <a class="far fa-edit" href="{{ url_for('student.edit_student', student_id=student.id) }}"
                       role="button" data-toggle="tooltip" title="edit" style="color: blue"></a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!--Payments table-->
    <div class="row">
        <div class="col text-left">
            <h3>Payment Information</h3>
        </div>
        <div class="col text-center">
            Current card: {{ cards_html|safe }}
        </div>
        <div class="col text-right">
            <!--Update Card Button-->
            {% include 'payment/add_card_button.html' %}
        </div>
    </div>
    {# Table of User's payments #}
    {{ payments_html|safe }}


{% endblock %}


{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
    <!--Script for Tooltip-->
    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}