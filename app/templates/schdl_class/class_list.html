{% extends "dashboard/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}{{ _('Class List') }}{% endblock %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.18/b-1.5.2/b-colvis-1.5.2/b-html5-1.5.2/b-print-1.5.2/r-2.2.2/sl-1.2.6/datatables.min.css"/>
{% endblock %}


{% block page_content %}
    {{ super() }}
    <div class="row">
        <div class="col-md-3 offset-md-9">
            {% if current_classes_only %}
                <a class="btn btn-outline-primary" href="{{ url_for('schdl_class.class_all_list') }}"
                   role="button">{{ _('Show All Classes') }}</a>
            {% else %}
                <a class="btn btn-outline-primary" href="{{ url_for('schdl_class.class_list') }}"
                   role="button">{{ _('Show Current Classes') }}</a>
            {% endif %}
            <a class="btn btn-outline-success" href="{{ url_for('schdl_class.add_class') }}"
               role="button">{{ _('Add New Class') }}</a>
        </div>

    </div>
    <div class="row">
        <div class="col">
            <h1>{{ _('List of classes') }}</h1>
            <form method="POST" action="" id="theForm">
                <table class="table table-hover table-bordered" id="maintable">
                    <caption>{{ _('List of classes') }}</caption>
                    <thead>
                    <tr id="filterrow">
                        <th></th>
                        <th id="filtercol">{{ _('School') }}</th>
                        <th id="filtercol">{{ _('Subject') }}</th>
                        <th id="filtercol">{{ _('Day') }}</th>
                        <th id="filtercol">{{ _('Time') }}</th>
                        <th id="filtercol">{{ _('Start date') }}</th>
                        <th id="filtercol">{{ _('End date') }}</th>
                        <th id="filtercol">{{ _('Teacher') }}</th>
                        <th id="filtercol">{{ _('Price') }}</th>
                        <th></th>
                    </tr>
                    <tr>
                        <th class="text-center">#</th>
                        <th class="text-center">{{ _('School') }}</th>
                        <th class="text-center">{{ _('Subject') }}</th>
                        <th class="text-center">{{ _('Day') }}</th>
                        <th class="text-center">{{ _('Time') }}</th>
                        <th class="text-center">{{ _('Start date') }}</th>
                        <th class="text-center">{{ _('End date') }}</th>
                        <th class="text-center">{{ _('Teacher') }}</th>
                        <th class="text-center">{{ _('Price') }}</th>
                        <th class="text-center">{{ _('Edit') }}</th>
                    </tr>
                    </thead>
                    <tbody>

                    {% for current_class in classes %}
                        <tr>
                            <td><input type="hidden" name="schdl_classes" value="{{ current_class.id }}"></td>
                            <td>{{ current_class.school.name }}</td>
                            <td bgcolor="{{ current_class.subject.color }}"><a
                                    href="{{ url_for('schdl_class.info_class', class_id=current_class.id) }}">{{ current_class.subject.name }}</a>
                            </td>
                            <td>{{ current_class.day_of_week }}</td>
                            {% if current_class.class_time_start and current_class.class_time_end %}
                                <td>{{ current_class.class_time_start | ctimeformat }}
                                    - {{ current_class.class_time_end | ctimeformat }}</td>
                            {% else %}
                                <td></td>
                            {% endif %}
                            {% if current_class.class_start and current_class.class_end %}
                                <td>{{ current_class.class_start | cdateformat }}</td>
                                <td>{{ current_class.class_end | cdateformat }}</td>
                            {% else %}
                                <td></td>
                                <td></td>
                            {% endif %}
                            <td>{{ current_class.teacher.user.first_name }} {{ current_class.teacher.user.last_name }}</td>
                            <td>${{ current_class.price }}</td>
                            <td>
                                <a href="{{ url_for('schdl_class.edit_class', class_id=current_class.id) }}">{{ _('Edit') }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <select name="actionselect" id="actionselect">
                    <option value="">{{ _('with selection') }}</option>
                    <option value="call">{{ _('Robo Call') }}</option>
                    <option value="txt">{{ _('Send txt') }}</option>
                    <option value="email">{{ _('Send email') }}</option>
                    <option value="labels">{{ _('Print Labels') }}</option>
                </select>
                <button id="submit">{{ _('Submit') }}</button>
            </form>
        </div>
    </div>

{% endblock %}


{% block scripts %}
    {{ super() }}
    {% include 'dashboard/datatable.html' %}
{% endblock %}